<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>git-crypt å®˜æ–¹æ–‡æ¡£</title>
  <meta name="description" content="åŸæ–‡æ¡£: https://github.com/AGWA/git-crypt/blob/master/README.md" />
<link rel="canonical" href="https://wardenxyz.github.io/posts/2024/git-crypt_official_doc.html" />
<meta property="og:title" content="git-crypt å®˜æ–¹æ–‡æ¡£" />
<meta property="og:description" content="åŸæ–‡æ¡£: https://github.com/AGWA/git-crypt/blob/master/README.md" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://wardenxyz.github.io/posts/2024/git-crypt_official_doc.html" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:title" content="git-crypt å®˜æ–¹æ–‡æ¡£" />
<meta name="twitter:description" content="åŸæ–‡æ¡£: https://github.com/AGWA/git-crypt/blob/master/README.md" />
<script type="application/ld+json">{"@context": "https://schema.org", "@type": "Article", "headline": "git-crypt å®˜æ–¹æ–‡æ¡£", "datePublished": "2024-07-08T00:00:00", "url": "https://wardenxyz.github.io/posts/2024/git-crypt_official_doc.html", "keywords": "git-crypt,git", "inLanguage": "zh-CN"}</script>
  <link rel="stylesheet" href="../../static/style.css" />
  <link rel="icon" href="../../static/favicon.svg" type="image/svg+xml" />
  <meta name="color-scheme" content="light dark" />
  <link rel="alternate" type="application/rss+xml" title="My Blog" href="../../feed.xml" />
  <!-- Apply saved theme early to avoid FOUC -->
  <script>
    (function(){
      try{
        var t = localStorage.getItem('theme');
        if(t === 'light' || t === 'dark'){
          document.documentElement.setAttribute('data-theme', t);
        }
      }catch(_e){/* noop */}
    })();
  </script>
  
  <!-- MathJax Configuration -->
  <script>
    window.MathJax = {
      tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']],
        displayMath: [['$$', '$$'], ['\\[', '\\]']],
        processEscapes: true,
        processEnvironments: true,
        tags: 'ams'
      },
      options: {
        ignoreHtmlClass: 'tex2jax_ignore',
        processHtmlClass: 'tex2jax_process'
      },
      svg: {
        fontCache: 'global'
      }
    };
  </script>
  <script type="text/javascript" id="MathJax-script" async
    src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
  </script>
  <!-- Mermaid Diagram -->
  <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js" defer></script>
  <script>
    // Initialize Mermaid when DOM is ready
    document.addEventListener('DOMContentLoaded', function(){
      if(window.mermaid && mermaid.initialize){
        // Respect explicit data-theme over system preference
        const dt = document.documentElement.getAttribute('data-theme');
        const theme = dt === 'dark' ? 'dark' : (dt === 'light' ? 'default' : ((window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) ? 'dark' : 'default'));
        mermaid.initialize({ startOnLoad: true, theme });
        if(mermaid.run){
          try{ mermaid.run({ querySelector: '.mermaid' }); }catch(e){}
        }
      }
    });
  </script>
</head>
<body data-base="../../">
  <header class="site-header">
    <div class="container header-inner">
      <a class="brand" href="../../index.html">My Blog</a>
  <button class="menu-toggle" id="menuToggle" aria-label="æ‰“å¼€èœå•" aria-controls="primaryNav" aria-expanded="false">â˜°</button>
      <div class="search" role="search">
        <input type="search" id="searchInput" placeholder="æœç´¢æ–‡ç« ..." aria-label="æœç´¢æ–‡ç« " autocomplete="off" />
        <div class="search-results" id="searchResults" role="listbox" aria-label="æœç´¢ç»“æœ"></div>
      </div>
      <button class="theme-toggle" id="themeToggle" aria-label="åˆ‡æ¢ä¸»é¢˜" title="åˆ‡æ¢ä¸»é¢˜">ğŸ–¥ï¸</button>
      <nav class="nav" id="primaryNav">
        <a class="nav-link" href="../../index.html">é¦–é¡µ</a>
        <a class="nav-link" href="../../categories.html">Categories</a>
        <a class="nav-link" href="../../tags.html">Tags</a>
        <a class="nav-link github" href="https://github.com/wardenxyz" target="_blank" rel="noopener">GitHub</a>
      </nav>
    </div>
  </header>

  <main class="container layout layout-3">
    <aside class="sidebar-col" id="sidebar">
      <nav class="sidebar" aria-label="æ‰€æœ‰æ–‡ç« "><div class="sidebar-group"><div class="sidebar-year">Others</div><ul><li><a href="../../index.html">éšä¾¿å†™å†™</a></li><li><a href="../../categories.html">Categories</a></li><li><a href="../../tags.html">Tags</a></li></ul></div><div class="sidebar-group"><div class="sidebar-year">2025</div><ul><li><a href="../2025/SOPS.html">SOPS:Secrets OPerationS</a></li><li><a href="../2025/age.html">age-note</a></li><li><a href="../2025/yt-dlp.html">yt-dlp ä½¿ç”¨</a></li><li><a href="../2025/cross-platform-byte-control.md.html">è·¨ç³»ç»Ÿé¿å…æ¢è¡Œç¬¦å¯¼è‡´å­—èŠ‚å·®å¼‚çš„æ–¹æ³•</a></li><li><a href="../2025/introduce-passkey.html">Passkey:Secure,Convenient Login</a></li><li><a href="../2025/npm-config.html">ä¿®æ”¹ npm node_modules ä½ç½®</a></li><li><a href="../2025/powershell-get-command.html">PowerShell Get-Command å‘½ä»¤</a></li><li><a href="../2025/background-color.html">èƒŒæ™¯é¢œè‰²</a></li><li><a href="../2025/git-hook.html">è‡ªç”¨ git hook</a></li><li><a href="../2025/typst-syntax-simple-introduction.html">Typst è¯­æ³•ç®€å•ä»‹ç»</a></li><li><a href="../2025/shut-wps-background-runing.html">å…³é—­ WPS åå°è¿è¡Œ</a></li><li><a href="../2025/font.html">ä¸ªäººå­—ä½“</a></li><li><a href="../2025/github-avatar.html">GitHub å¤´åƒ</a></li><li><a href="../2025/regex-note.html">æ­£åˆ™è¡¨è¾¾å¼ç®€æ˜æŒ‡å—</a></li><li><a href="../2025/Rollback-commit.html">å›æ»šæäº¤</a></li><li><a href="../2025/use_python_gen_site.html">ä½¿ç”¨ Python ç”Ÿæˆé™æ€ç½‘é¡µ</a></li><li><a href="../2025/install_wsl2_and_to_d_disk.html">å®‰è£… WSL2 å¹¶è¿ç§»åˆ° D ç›˜</a></li><li><a href="../2025/zed_use_typstyle.html">åœ¨ zed ä¸Šé…ç½® typstyle</a></li><li><a href="../2025/Rust_Windows_Config.html">åœ¨ Windows ä¸Šé…ç½® Rust ç¯å¢ƒ</a></li><li><a href="../2025/conda_note.html">conda ä½¿ç”¨ç¬”è®°</a></li><li><a href="../2025/Zed_set_OpenAI_API_Compatible_model.html">åœ¨ Zed Editor ä¸­é…ç½® OpenAI API å…¼å®¹çš„æ¨¡å‹</a></li><li><a href="../2025/zed_use.html">zed ä½¿ç”¨ç¬”è®°</a></li><li><a href="../2025/ollama_run_deepseek.html">ollama è¿è¡Œ DeepSeek æ¨¡å‹</a></li></ul></div><div class="sidebar-group"><div class="sidebar-year">2024</div><ul><li><a href="pull_request_steps.html">Pull Request çš„æ­¥éª¤</a></li><li><a href="Typst_note.html">Typst ç¬”è®°</a></li><li><a href="git_reset.html">git é‡ç½®å½“å‰åˆ†æ”¯</a></li><li><a href="vitepress_note.html">vitepress å­¦ä¹ ç¬”è®°</a></li><li><a href="deploy_gitHub_page.html">GitHub page æ­å»ºå­¦ä¹ ç¬”è®°</a></li><li><a href="Linux_note.html">Linux å­¦ä¹ ç¬”è®°</a></li><li><a href="OpenSSL_encrypt_note.html">OpenSSL åŠ è§£å¯†é€ŸæŸ¥ç¬”è®°</a></li><li><a href="python_note.html">python å­¦ä¹ ç¬”è®°</a></li><li><a href="lazy.nvim_note.html">lazy.nvim å­¦ä¹ ç¬”è®°</a></li><li><a href="git-izer_note.html">git-sizer å­¦ä¹ ç¬”è®°</a></li><li><a href="git_force_overwrite_local_repo.html">git å¼ºåˆ¶è¦†ç›–æœ¬åœ°ä»“åº“</a></li><li><a href="bilibili_embedding_code.html">Bç«™åµŒå…¥ä»£ç </a></li><li><a href="personal_software.html">ä¸ªäººè‡ªç”¨è½¯ä»¶</a></li><li><a href="you-get_note.html">ç”¨ you-get ä¸‹è½½Bç«™è§†é¢‘</a></li><li><a href="git-crypt_note.html">git-crypt å­¦ä¹ ç¬”è®°</a></li><li><a href="gen_GPG_key.html">ç”Ÿæˆ GPG å¯†é’¥</a></li><li><a href="git-crypt_official_doc.html" class="active">git-crypt å®˜æ–¹æ–‡æ¡£</a></li><li><a href="git-crypt_official_doc_zh.html">git-crypt å®˜æ–¹æ–‡æ¡£ä¸­æ–‡ç¿»è¯‘</a></li><li><a href="README_outline.html">README æ–‡æ¡£ç»“æ„</a></li><li><a href="git_commit_message_standard.html">git commit message è§„èŒƒ</a></li><li><a href="vscode_snippets_variable.html">vscode snippets é¢„ç½®å˜é‡</a></li><li><a href="modern_cryptography.html">ç°ä»£åŠ å¯†å­¦</a></li><li><a href="former_doctor_who.html">ç¥ç§˜åšå£«å¤æ´»æ—¶é—´è¡¨</a></li><li><a href="ffmpeg_note.html">ffmpeg è‡ªç”¨å‘½ä»¤</a></li><li><a href="qqmail_third_party_config.html">ç¬¬ä¸‰æ–¹é‚®ç®±å®¢æˆ·ç«¯é…ç½®QQmail & Foxmail</a></li><li><a href="git_Cli.html">git å‘½ä»¤æ‰‹å†Œ</a></li><li><a href="LaTeX_note.html">LaTeX ä¸å¸Œè…Šå­—æ¯å¯¹ç…§è¡¨</a></li><li><a href="git_branch.html">git åˆ†æ”¯æ“ä½œ</a></li><li><a href="remove_file_from_git_history.html">ä» git æäº¤ä¸­ç§»é™¤æ–‡ä»¶</a></li><li><a href="vim_note.html">Vim é«˜æ•ˆé€ŸæŸ¥ç¬”è®°</a></li><li><a href="obsidian_shortcut_key.html">obsidianå¿«æ·é”®</a></li><li><a href="android_QQ_file_storage_path.html">æ‰‹æœºQQæ–‡ä»¶å­˜å‚¨è·¯å¾„</a></li><li><a href="browser_UA_value.html">æµè§ˆå™¨UAå€¼</a></li><li><a href="gpg_communication.html">GPG åœ¨é€šä¿¡ä¸­çš„ç®€å•ç†è§£</a></li><li><a href="vscode_note.html">VSCode é«˜æ•ˆä½¿ç”¨æŒ‡å—</a></li></ul></div></nav>
    </aside>
    <article class="content" id="content">
  <div class="post-meta" aria-label="æ–‡ç« å…ƒä¿¡æ¯"><span class="meta-item meta-date" title="å‘å¸ƒæ—¥æœŸ">ğŸ“… 2024-07-08</span><span class="meta-item" title="åˆ†ç±»">ğŸ“‚ <span class="badge badge-cat">è®¡ç®—æœº</span></span><span class="meta-item" title="æ ‡ç­¾">ğŸ·ï¸ <span class="badge badge-tag">git-crypt</span><span class="badge badge-tag">git</span></span></div>
  <h1 id="git-crypt">git-crypt å®˜æ–¹æ–‡æ¡£</h1>
<blockquote>
<p>åŸæ–‡æ¡£: <a href="https://github.com/AGWA/git-crypt/blob/master/README.md" rel="noopener noreferrer" target="_blank">https://github.com/AGWA/git-crypt/blob/master/README.md</a></p>
</blockquote>
<h2 id="git-crypt-transparent-file-encryption-in-git">git -crypt - transparent file encryption in git</h2>
<p>git-crypt enables transparent encryption and decryption of files in a
git repository.  Files which you choose to protect are encrypted when
committed, and decrypted when checked out.  git-crypt lets you freely
share a repository containing a mix of public and private content.
git-crypt gracefully degrades, so developers without the secret key can
still clone and commit to a repository with encrypted files.  This lets
you store your secret material (such as keys or passwords) in the same
repository as your code, without requiring you to lock down your entire
repository.</p>
<p>git-crypt was written by <a href="https://www.agwa.name" rel="noopener noreferrer" target="_blank">Andrew Ayer</a> (<a href="mailto:agwa@andrewayer.name">agwa@andrewayer.name</a>).
For more information, see <a href="https://www.agwa.name/projects/git-crypt" rel="noopener noreferrer" target="_blank">https://www.agwa.name/projects/git-crypt</a>.</p>
<h2 id="building-git-crypt">Building git-crypt</h2>
<p>See the <a href="https://github.com/AGWA/git-crypt/blob/master/INSTALL.md" rel="noopener noreferrer" target="_blank">INSTALL.md</a> file.</p>
<h2 id="using-git-crypt">Using git-crypt</h2>
<p>Configure a repository to use git-crypt:</p>
<pre class="highlight"><code>cd repo
git-crypt init</code></pre>
<p>Specify files to encrypt by creating a .gitattributes file:</p>
<pre class="highlight"><code>secretfile filter=git-crypt diff=git-crypt
*.key filter=git-crypt diff=git-crypt
secretdir/** filter=git-crypt diff=git-crypt</code></pre>
<p>Like a .gitignore file, it can match wildcards and should be checked into
the repository.  See below for more information about .gitattributes.
Make sure you don't accidentally encrypt the .gitattributes file itself
(or other git files like .gitignore or .gitmodules).  Make sure your
.gitattributes rules are in place <em>before</em> you add sensitive files, or
those files won't be encrypted!</p>
<p>Share the repository with others (or with yourself) using GPG:</p>
<pre class="highlight"><code>git-crypt add-gpg-user USER_ID</code></pre>
<p><code>USER_ID</code> can be a key ID, a full fingerprint, an email address, or
anything else that uniquely identifies a public key to GPG (see "HOW TO
SPECIFY A USER ID" in the gpg man page).  Note: <code>git-crypt add-gpg-user</code>
will add and commit a GPG-encrypted key file in the .git-crypt directory
of the root of your repository.</p>
<p>Alternatively, you can export a symmetric secret key, which you must
securely convey to collaborators (GPG is not required, and no files
are added to your repository):</p>
<pre class="highlight"><code>git-crypt export-key /path/to/key</code></pre>
<p>After cloning a repository with encrypted files, unlock with GPG:</p>
<pre class="highlight"><code>git-crypt unlock</code></pre>
<p>Or with a symmetric key:</p>
<pre class="highlight"><code>git-crypt unlock /path/to/key</code></pre>
<p>That's all you need to do - after git-crypt is set up (either with
<code>git-crypt init</code> or <code>git-crypt unlock</code>), you can use git normally -
encryption and decryption happen transparently.</p>
<h2 id="current-status">Current Status</h2>
<p>The latest version of git-crypt is <a href="https://github.com/AGWA/git-crypt/blob/master/NEWS.md" rel="noopener noreferrer" target="_blank">0.7.0</a>, released on
2022-04-21.  git-crypt aims to be bug-free and reliable, meaning it
shouldn't crash, malfunction, or expose your confidential data.
However, it has not yet reached maturity, meaning it is not as
documented, featureful, or easy-to-use as it should be.  Additionally,
there may be backwards-incompatible changes introduced before version
1.0.</p>
<h2 id="security">Security</h2>
<p>git-crypt is more secure than other transparent git encryption systems.
git-crypt encrypts files using AES-256 in CTR mode with a synthetic IV
derived from the SHA-1 HMAC of the file.  This mode of operation is
provably semantically secure under deterministic chosen-plaintext attack.
That means that although the encryption is deterministic (which is
required so git can distinguish when a file has and hasn't changed),
it leaks no information beyond whether two files are identical or not.
Other proposals for transparent git encryption use ECB or CBC with a
fixed IV.  These systems are not semantically secure and leak information.</p>
<h2 id="limitations">Limitations</h2>
<p>git-crypt relies on git filters, which were not designed with encryption
in mind.  As such, git-crypt is not the best tool for encrypting most or
all of the files in a repository. Where git-crypt really shines is where
most of your repository is public, but you have a few files (perhaps
private keys named *.key, or a file with API credentials) which you
need to encrypt.  For encrypting an entire repository, consider using a
system like <a href="https://spwhitton.name/tech/code/git-remote-gcrypt/" rel="noopener noreferrer" target="_blank">git-remote-gcrypt</a>
instead.  (Note: no endorsement is made of git-remote-gcrypt's security.)</p>
<p>git-crypt does not encrypt file names, commit messages, symlink targets,
gitlinks, or other metadata.</p>
<p>git-crypt does not hide when a file does or doesn't change, the length
of a file, or the fact that two files are identical (see "Security"
section above).</p>
<p>git-crypt does not support revoking access to an encrypted repository
which was previously granted. This applies to both multi-user GPG
mode (there's no del-gpg-user command to complement add-gpg-user)
and also symmetric key mode (there's no support for rotating the key).
This is because it is an inherently complex problem in the context
of historical data. For example, even if a key was rotated at one
point in history, a user having the previous key can still access
previous repository history. This problem is discussed in more detail in
<a href="https://github.com/AGWA/git-crypt/issues/47" rel="noopener noreferrer" target="_blank">https://github.com/AGWA/git-crypt/issues/47</a>.</p>
<p>Files encrypted with git-crypt are not compressible.  Even the smallest
change to an encrypted file requires git to store the entire changed file,
instead of just a delta.</p>
<p>Although git-crypt protects individual file contents with a SHA-1
HMAC, git-crypt cannot be used securely unless the entire repository is
protected against tampering (an attacker who can mutate your repository
can alter your .gitattributes file to disable encryption).  If necessary,
use git features such as signed tags instead of relying solely on
git-crypt for integrity.</p>
<p>Files encrypted with git-crypt cannot be patched with git-apply, unless
the patch itself is encrypted.  To generate an encrypted patch, use <code>git
diff --no-textconv --binary</code>.  Alternatively, you can apply a plaintext
patch outside of git using the patch command.</p>
<p>git-crypt does not work reliably with some third-party git GUIs, such
as <a href="https://jira.atlassian.com/browse/SRCTREE-2511" rel="noopener noreferrer" target="_blank">Atlassian SourceTree</a>
and GitHub for Mac.  Files might be left in an unencrypted state.</p>
<h2 id="gitattributes-file">Gitattributes File</h2>
<p>The .gitattributes file is documented in the gitattributes(5) man page.
The file pattern format is the same as the one used by .gitignore,
as documented in the gitignore(5) man page, with the exception that
specifying merely a directory (e.g. <code>/dir/</code>) is <em>not</em> sufficient to
encrypt all files beneath it.</p>
<p>Also note that the pattern <code>dir/*</code> does not match files under
sub-directories of dir/.  To encrypt an entire sub-tree dir/, use <code>dir/**</code>:</p>
<pre class="highlight"><code>dir/** filter=git-crypt diff=git-crypt</code></pre>
<p>The .gitattributes file must not be encrypted, so make sure wildcards don't
match it accidentally.  If necessary, you can exclude .gitattributes from
encryption like this:</p>
<pre class="highlight"><code>.gitattributes !filter !diff</code></pre>
    </article>
    <aside class="toc" id="toc">
      <div class="toc-title">å¤§çº²</div>
      <div class="toc">
<ul>
<li><a href="#git-crypt">git-crypt å®˜æ–¹æ–‡æ¡£</a><ul>
<li><a href="#git-crypt-transparent-file-encryption-in-git">git -crypt - transparent file encryption in git</a></li>
<li><a href="#building-git-crypt">Building git-crypt</a></li>
<li><a href="#using-git-crypt">Using git-crypt</a></li>
<li><a href="#current-status">Current Status</a></li>
<li><a href="#security">Security</a></li>
<li><a href="#limitations">Limitations</a></li>
<li><a href="#gitattributes-file">Gitattributes File</a></li>
</ul>
</li>
</ul>
</div>

    </aside>
  </main>

  <footer class="site-footer">
    <div class="container" style="text-align: center;">
      <div>Â© 2024 - 2025 wardenxyz</div>
      <div>MIT License</div>
    </div>
  </footer>

  <button id="backToTop" class="back-to-top" aria-label="å›åˆ°é¡¶éƒ¨">â†‘</button>

  <script src="../../static/main.js"></script>
</body>
</html>
